<?xml version="1.0" encoding = "UTF-8"?>
<wsag:Template wsag:TemplateId="1.0"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xmlns:wsag="http://schemas.ggf.org/graap/2007/03/ws-agreement"
               xmlns:xs="http://www.w3.org/2001/XMLSchema"
               xmlns:iag="http://www.isa.us.es/schemas/iagree"
               xsi:schemaLocation="http://schemas.ggf.org/graap/2007/03/wsagreement"
               agreement_types.xsd="http://www.w3.org/2001/XMLSchema XMLSchema.xsd">
    <wsag:Name>IAgreeCore</wsag:Name>
    <wsag:Context>
        <wsag:AgreementResponder id="Prov1">Provider</wsag:AgreementResponder>
        <iag:Metrics>
            <iag:Metric id="boolean" type="Boolean" domain="{true, false}"></iag:Metric>
            <iag:Metric id="met3" type="float" domain="[0..128]"></iag:Metric>
            <iag:Metric id="met2" type="integer" domain="[0..512]"></iag:Metric>
            <iag:Metric id="met1" type="integer" domain="[0..23]"></iag:Metric>
            <iag:Metric id="met6" type="integer" domain="[-50..50]"></iag:Metric>
            <iag:Metric id="met5" type="float" domain="[0..100]"></iag:Metric>
            <iag:Metric id="met4" type="integer" domain="[0..512]"></iag:Metric>
        </iag:Metrics>
    </wsag:Context>
    <wsag:Terms>
        <wsag:All>
            <wsag:ServiceDescriptionTerm wsag:Name="SDT_IAg-Core" wsag:ServiceName="IAg-Core" 
                                         iag:ServiceReference="iagree.core.com/service">
                <OfferItem name="ConfProp1" iag:Metric="met1"></OfferItem>
                <OfferItem name="ConfProp2" iag:Metric="met2">18</OfferItem>
                <OfferItem name="ConfProp3" iag:Metric="met6"></OfferItem>
            </wsag:ServiceDescriptionTerm>
            <wsag:ServiceProperties wsag:Name="SP_IAg-Core" wsag:ServiceName="IAg-Core">
                <wsag:VariableSet>
                    <wsag:Variable wsag:Name="MonitProp3" iag:Metric="met4">
                        <wsag:Location>/MonitProp3</wsag:Location>
                    </wsag:Variable>
                    <wsag:Variable wsag:Name="MonitProp4" iag:Metric="met5">
                        <wsag:Location>/MonitProp4</wsag:Location>
                    </wsag:Variable>
                    <wsag:Variable wsag:Name="MonitProp1" iag:Metric="met2">
                        <wsag:Location>/MonitProp1</wsag:Location>
                    </wsag:Variable>
                    <wsag:Variable wsag:Name="MonitProp2" iag:Metric="met3">
                        <wsag:Location>/MonitProp2</wsag:Location>
                    </wsag:Variable>
                </wsag:VariableSet>
            </wsag:ServiceProperties>
            <wsag:GuaranteeTerm wsag:Obligated="Provider" wsag:Name="G1">
                <wsag:QualifyingCondition>
                    MonitProp3 >= 128
                </wsag:QualifyingCondition>
                <wsag:ServiceLevelObjective>
                    <wsag:CustomServiceLevel>MonitProp1 >= 64</wsag:CustomServiceLevel>
                </wsag:ServiceLevelObjective>
            </wsag:GuaranteeTerm>
            <wsag:GuaranteeTerm wsag:Obligated="Consumer" wsag:Name="G2">
                <wsag:ServiceLevelObjective>
                    <wsag:CustomServiceLevel>MonitProp2 >= 95.5</wsag:CustomServiceLevel>
                </wsag:ServiceLevelObjective>
            </wsag:GuaranteeTerm>
        </wsag:All>
    </wsag:Terms>
    <wsag:CreationConstraints>
        <wsag:Constraint>
            <Name>C1</Name>
            <Content>ConfProp2 == ConfProp1 * 2</Content>
        </wsag:Constraint>
        <wsag:Constraint>
            <Name>C2</Name>
            <Content>(ConfProp1 > 9) AND ((MonitProp3 >= 128) OR (ConfProp3 > 0))</Content>
        </wsag:Constraint>
        <wsag:Constraint>
            <Name>C3</Name>
            <Content>ConfProp3 > 0 IMPLIES MonitProp3 == 256</Content>
        </wsag:Constraint>
    </wsag:CreationConstraints>
</wsag:Template>
